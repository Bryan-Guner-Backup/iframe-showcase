<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="minizlib">minizlib</h1>
<p>A fast zlib stream built on <a href="http://npm.im/minipass">minipass</a> and Node.js’s zlib binding.</p>
<p>This module was created to serve the needs of <a href="http://npm.im/tar">node-tar</a> and <a href="http://npm.im/minipass-fetch">minipass-fetch</a>.</p>
<p>Brotli is supported in versions of node with a Brotli binding.</p>
<h2 id="how-does-this-differ-from-the-streams-in-requirezlib">How does this differ from the streams in <code>require('zlib')</code>?</h2>
<p>First, there are no convenience methods to compress or decompress a buffer. If you want those, use the built-in <code>zlib</code> module. This is only streams. That being said, Minipass streams to make it fairly easy to use as one-liners: <code>new zlib.Deflate().end(data).read()</code> will return the deflate compressed result.</p>
<p>This module compresses and decompresses the data as fast as you feed it in. It is synchronous, and runs on the main process thread. Zlib and Brotli operations can be high CPU, but they’re very fast, and doing it this way means much less bookkeeping and artificial deferral.</p>
<p>Node’s built in zlib streams are built on top of <code>stream.Transform</code>. They do the maximally safe thing with respect to consistent asynchrony, buffering, and backpressure.</p>
<p>See <a href="http://npm.im/minipass">Minipass</a> for more on the differences between Node.js core streams and Minipass streams, and the convenience methods provided by that class.</p>
<h2 id="classes">Classes</h2>
<ul>
<li>Deflate</li>
<li>Inflate</li>
<li>Gzip</li>
<li>Gunzip</li>
<li>DeflateRaw</li>
<li>InflateRaw</li>
<li>Unzip</li>
<li>BrotliCompress (Node v10 and higher)</li>
<li>BrotliDecompress (Node v10 and higher)</li>
</ul>
<h2 id="usage">USAGE</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">const</span> zlib <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;minizlib&#39;</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">const</span> input <span class="op">=</span> <span class="at">sourceOfCompressedData</span>()</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">const</span> decode <span class="op">=</span> <span class="kw">new</span> <span class="va">zlib</span>.<span class="at">BrotliDecompress</span>()</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">const</span> output <span class="op">=</span> <span class="at">whereToWriteTheDecodedData</span>()</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="va">input</span>.<span class="at">pipe</span>(decode).<span class="at">pipe</span>(output)</a></code></pre></div>
</body>
</html>
